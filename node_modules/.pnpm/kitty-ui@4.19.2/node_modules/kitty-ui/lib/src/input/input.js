"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue");require("./style/index.css");const r=require("../icon/index.js"),g=require("./utils.js"),v=require("@kitty-ui/utils"),S={key:0,class:"k-textarea"},C=["value"],I={key:0,class:"k-input__prepend"},N=["disabled","value"],z={key:1,class:"k-input__append"},E={class:"k-input__suffix"},P={key:3,class:"k-input__prefix"},j={key:4,class:"k-input__suffix no-cursor"},$=e.defineComponent({name:"k-input"}),q=e.defineComponent({...$,props:{modelValue:{default:""},disabled:{type:Boolean},size:null,clearable:{type:Boolean},showPassword:{type:Boolean},prefixIcon:null,suffixIcon:null,autosize:{type:[Boolean,Object]}},emits:["update:modelValue","change"],setup(_,{emit:u}){const t=_,i=e.ref(!1),p=o=>{o.target.value?i.value=!0:i.value=!1,u("change",o.target.value),u("update:modelValue",o.target.value)},s=e.useAttrs(),y=e.computed(()=>({"is-disabled":t.disabled,[`k-input--${t.size}`]:t.size,["k-input-group k-input-prepend"]:l.prepend,["k-input-group k-input-append"]:l.append})),x=e.computed(()=>({["k-input--prefix"]:f.value})),c=e.ref(!0),w=()=>{u("update:modelValue","")},a=e.ref();Promise.resolve().then(()=>{t.showPassword&&(a.value.type="password")});const d=e.ref("browse"),h=e.computed(()=>t.showPassword&&t.modelValue&&!t.clearable),V=()=>{if(a.value.type==="password"){d.value="eye-close",a.value.type=s.type||"text";return}a.value.type="password",d.value="browse"},b=e.computed(()=>t.suffixIcon&&!t.clearable&&!t.showPassword),f=e.computed(()=>t.prefixIcon),m=e.ref(),k=e.shallowRef();e.watch(()=>t.modelValue,()=>{if(s.type==="textarea"&&t.autosize){const o=v.isObject(t.autosize)?t.autosize.minRows:void 0,n=v.isObject(t.autosize)?t.autosize.maxRows:void 0;e.nextTick(()=>{m.value=g.calcTextareaHeight(k.value,o,n)})}},{immediate:!0});const l=e.useSlots();return(o,n)=>e.unref(s).type==="textarea"?(e.openBlock(),e.createElementBlock("div",S,[e.createElementVNode("textarea",e.mergeProps({class:"k-textarea__inner",style:m.value},e.unref(s),{ref_key:"textarea",ref:k,value:t.modelValue,onInput:p}),null,16,C)])):(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(["k-input",e.unref(y)]),onMouseenter:n[0]||(n[0]=B=>c.value=!0),onMouseleave:n[1]||(n[1]=B=>c.value=!1)},[e.unref(l).prepend?(e.openBlock(),e.createElementBlock("div",I,[e.renderSlot(o.$slots,"prepend")])):e.createCommentVNode("",!0),e.createElementVNode("input",e.mergeProps({ref_key:"ipt",ref:a,class:["k-input__inner",e.unref(x)],disabled:t.disabled},e.unref(s),{value:t.modelValue,onInput:p}),null,16,N),e.unref(l).append?(e.openBlock(),e.createElementBlock("div",z,[e.renderSlot(o.$slots,"append")])):e.createCommentVNode("",!0),t.clearable&&i.value?e.withDirectives((e.openBlock(),e.createElementBlock("div",{key:2,onClick:w,class:"k-input__suffix"},[e.createVNode(e.unref(r.default),{name:"error"})],512)),[[e.vShow,c.value]]):e.createCommentVNode("",!0),e.withDirectives(e.createElementVNode("div",E,[e.createVNode(e.unref(r.default),{onClick:V,name:d.value},null,8,["name"])],512),[[e.vShow,e.unref(h)]]),e.unref(f)?(e.openBlock(),e.createElementBlock("div",P,[e.createVNode(e.unref(r.default),{name:t.prefixIcon},null,8,["name"])])):e.createCommentVNode("",!0),e.unref(b)?(e.openBlock(),e.createElementBlock("div",j,[e.createVNode(e.unref(r.default),{name:t.suffixIcon},null,8,["name"])])):e.createCommentVNode("",!0)],34))}});exports.default=q;
